# ===========================
# ENSUREDIT — Netlify Configuration
# Production deployment for www.ensuredit.com
# ===========================

[build]
  publish = "."
  # No build command needed — static site

# ===========================
# REDIRECTS
# ===========================

# Redirect bare domain to www (primary domain)
[[redirects]]
  from = "https://ensuredit.com/*"
  to = "https://www.ensuredit.com/:splat"
  status = 301
  force = true

# Redirect old GitHub Pages URL to production domain
[[redirects]]
  from = "https://rohitsadhu1947.github.io/insurance-website/*"
  to = "https://www.ensuredit.com/:splat"
  status = 301

# sales-ops redirects to bi-platform
[[redirects]]
  from = "/sales-ops"
  to = "/bi-platform.html"
  status = 301

# Clean URLs — /about → /about.html (but not if file exists)
[[redirects]]
  from = "/about"
  to = "/about.html"
  status = 200

[[redirects]]
  from = "/contact"
  to = "/contact.html"
  status = 200

[[redirects]]
  from = "/ice"
  to = "/ice.html"
  status = 200

[[redirects]]
  from = "/enbed"
  to = "/enbed.html"
  status = 200

[[redirects]]
  from = "/enlyt"
  to = "/enlyt.html"
  status = 200

[[redirects]]
  from = "/bi-platform"
  to = "/bi-platform.html"
  status = 200

[[redirects]]
  from = "/screenguard"
  to = "/screenguard.html"
  status = 200

[[redirects]]
  from = "/ai-agents"
  to = "/ai-agents.html"
  status = 200

# Custom 404
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 404

# ===========================
# HEADERS — Security + Performance
# ===========================

# Global security headers
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "SAMEORIGIN"
    X-Content-Type-Options = "nosniff"
    X-XSS-Protection = "1; mode=block"
    Referrer-Policy = "strict-origin-when-cross-origin"
    Permissions-Policy = "camera=(), microphone=(), geolocation=()"
    Content-Security-Policy = "frame-ancestors 'self'"

# Cache static assets aggressively (CSS, JS, SVG)
[[headers]]
  for = "*.css"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "*.js"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "*.svg"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# HTML pages — short cache, always revalidate
[[headers]]
  for = "*.html"
  [headers.values]
    Cache-Control = "public, max-age=0, must-revalidate"

# Fonts (if added later)
[[headers]]
  for = "*.woff2"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"
